<p id="notice"><%= notice %></p>

<h1>Players</h1>
<table class="player-list">
  <thead>
    <tr>
      <th>Character</th>
      <th>Experience</th>
      <th>Race</th>
      <th>Background</th>
      <th>Alignment</th>
      <th>Player name</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @players.each do |player| %>
    <tr>
      <td class="sao-container" style="display: flex">
      
      <%= image_tag(player.character_class.downcase, class:'class-icon') %>
      <div class="sao-healthbar">
        <div class="main-container">
          
          <div class="character-name">
            <%= player.character_name %>
          </div>
            <div class="health-bar--outline">
              <div class="health-bar--border">
                <div class="health-bar--background">
                  <%= content_tag(:div, "", class: ["exp-bar--exp"], style: ["--exp:#{player.experience - player.get_lvl[1]};", "--max:#{player.get_lvl[2] - player.get_lvl[1]}"] ) %>
                </div>
              </div>
            </div>
        </div>
        <%= content_tag(:div, "/", class: ["health-indicator"], style: ["--health:'#{player.get_lvl[1]}';", "--max-health:'#{player.get_lvl[2]}';", "--exp:'#{player.experience}'"] ) %>
        <div class="character-level" style="--level: ">
          Lv. <%= player.get_lvl[0] %>
        </div>
      </div>

      <div class="menu">
        <ul class="menu-list">
        <% @abilities.each do |ability| %>
        <% if ability.player_id == player.id%>
          <% case ability.name
              when 'Strength' %>
              <li class="menu-list-item">Strength <span class="menu-list-text lvl-edit"><i class="fas fa-angle-down" id="<%= player.id %>-down-str" ></i>  <%= ability.level %>  <span><i class="fas fa-angle-up" id="<%= player.id %>-up-str"></i></li>
          <%  when 'Dexterity' %>
              <li class="menu-list-item">Dexterity <span class="menu-list-text lvl-edit"><i class="fas fa-angle-down" id="<%= player.id %>-down-dex"></i>  <%= ability.level %>  <span><i class="fas fa-angle-up" id="<%= player.id %>-up-dex"></i></li>
          <%  when 'Constitution' %>
              <li class="menu-list-item">Constitution <span class="menu-list-text lvl-edit"><i class="fas fa-angle-down" id="<%= player.id %>-down-con"></i>  <%= ability.level %>  <span><i class="fas fa-angle-up" id="<%= player.id %>-up-con"></i></li>
          <%  when 'Intelligence' %>
              <li class="menu-list-item">Intelligence <span class="menu-list-text lvl-edit"><i class="fas fa-angle-down" id="<%= player.id %>-down-int"></i>  <%= ability.level %>  <span><i class="fas fa-angle-up" id="<%= player.id %>-up-int"></i></li>
          <%  when 'Wisdom' %>
              <li class="menu-list-item">Wisdom <span class="menu-list-text lvl-edit"><i class="fas fa-angle-down" id="<%= player.id %>-down-wis"></i>  <%= ability.level %>  <span><i class="fas fa-angle-up" id="<%= player.id %>-up-wis"></i></li>
          <%  when 'Charisma' %>
              <li class="menu-list-item">Charisma <span class="menu-list-text lvl-edit"><i class="fas fa-angle-down" id="<%= player.id %>-down-cha"></i>  <%= ability.level %>  <span><i class="fas fa-angle-up" id="<%= player.id %>-up-cha"></i></li>
          <% end %>
        <% end %>
      <% end %>
        </ul>
      </div>
      </td>

        <td><%= player.experience %></td>
        <td><%= player.race %></td>
        <td><%= player.background %></td>
        <td><%= player.alignment %></td>
        <td><%= player.player_name %></td>
        <td>
        <%= link_to 'Show', player %><br>
        <%= link_to 'Edit', edit_player_path(player) %><br>
        <%= link_to 'Destroy', player, method: :delete, data: { confirm: 'Are you sure?' } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Player', new_player_path %>


<%= javascript_pack_tag 'main' %>